{\rtf1\ansi\ansicpg1252\cocoartf2761
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 .SFNS-Regular_wdth_opsz168000_GRAD_wght12C0000;\f1\fnil\fcharset0 HelveticaNeue;\f2\fnil\fcharset0 HelveticaNeue-Bold;
\f3\fnil\fcharset0 .SFNS-Regular_wdth_opsz13AFF9_GRAD_wght12C0000;\f4\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red42\green44\blue46;\red246\green247\blue249;\red223\green33\blue121;
}
{\*\expandedcolortbl;;\cssrgb\c21569\c22745\c23529;\cssrgb\c97255\c97647\c98039;\cssrgb\c90980\c24314\c54902;
}
{\*\listtable{\list\listtemplateid1\listhybrid{\listlevel\levelnfc23\levelnfcn23\leveljc0\leveljcn0\levelfollow0\levelstartat1\levelspace360\levelindent0{\*\levelmarker \{disc\}}{\leveltext\leveltemplateid1\'01\uc0\u8226 ;}{\levelnumbers;}\fi-360\li720\lin720 }{\listname ;}\listid1}}
{\*\listoverridetable{\listoverride\listid1\listoverridecount0\ls1}}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\sa120\partightenfactor0

\f0\fs45 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Accelerate and Optimize an N-Body Simulator\cb1 \
\pard\pardeftab720\sa240\partightenfactor0

\f1\fs30 \cf2 \cb3 An\'a0n-body\'a0simulator predicts the individual motions of a group of objects interacting with each other gravitationally.\'a001-nbody.cu\'a0contains a simple, though working, n-body simulator for bodies moving through 3-dimensional space.\cb1 \
\cb3 In its current CPU-only form, this application takes about 5 seconds to run on 4096 particles, and\'a0
\f2\b 20 minutes
\f1\b0 \'a0to run on 65536 particles. Your task is to GPU accelerate the program, retaining the correctness of the simulation.\cb1 \
\pard\pardeftab720\partightenfactor0

\fs39\fsmilli19687 \cf2 \cb3 Considerations to Guide Your Work
\fs30 \cb1 \
\pard\pardeftab720\sa120\partightenfactor0

\f3\fs39\fsmilli19687 \cf2 \
\pard\pardeftab720\sa240\partightenfactor0

\f1\fs30 \cf2 \cb3 Here are some things to consider before beginning your work:\cb1 \
\pard\tx220\tx720\pardeftab720\li720\fi-720\partightenfactor0
\ls1\ilvl0\cf2 \cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Especially for your first refactors, the logic of the application, the\'a0
\f4\fs26\fsmilli13125 \cf4 \strokec4 bodyForce
\f1\fs30 \cf2 \strokec2 \'a0function in particular, can and should remain largely unchanged: focus on accelerating it as easily as possible.\cb1 \
\ls1\ilvl0\cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 The code base contains a for-loop inside\'a0
\f4\fs26\fsmilli13125 \cf4 \strokec4 main
\f1\fs30 \cf2 \strokec2 \'a0for integrating the interbody forces calculated by\'a0
\f4\fs26\fsmilli13125 \cf4 \strokec4 bodyForce
\f1\fs30 \cf2 \strokec2 \'a0into the positions of the bodies in the system. This integration both needs to occur after\'a0
\f4\fs26\fsmilli13125 \cf4 \strokec4 bodyForce
\f1\fs30 \cf2 \strokec2 \'a0runs, and, needs to complete before the next call to\'a0
\f4\fs26\fsmilli13125 \cf4 \strokec4 bodyForce
\f1\fs30 \cf2 \strokec2 . Keep this in mind when choosing how and where to parallelize.\cb1 \
\ls1\ilvl0\cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 Use a\'a0
\f2\b profile driven
\f1\b0 \'a0and iterative approach.\cb1 \
\ls1\ilvl0\cb3 \kerning1\expnd0\expndtw0 \outl0\strokewidth0 {\listtext	\uc0\u8226 	}\expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 You are not required to add error handling to your code, but you might find it helpful, as you are responsible for your code working correctly.\cb1 \
\pard\pardeftab720\partightenfactor0

\f2\b \cf2 \cb3 Have Fun!
\f1\b0 \cb1 \
\
\
\
\
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 Use this code to compile the nbody simulator. Although it is initially a CPU-only application, is does accurately simulate the positions of the particles.\cb1 \
\
\
\
\pard\pardeftab720\partightenfactor0

\f2\b\fs22\fsmilli11250 \cf2 \cb3 ml NVHPC
\f1\b0\fs30 \cb1 \

\f2\b\fs22\fsmilli11250 \cb3 srun -n 8 -N 1 --x11 --pty /bin/bash
\f1\b0\fs30 \cb1 \

\f2\b\fs22\fsmilli11250 \cb3 nvcc -std=c++11 -o nbody\'a0 01-nbody.cu
\f1\b0\fs30 \cb1 \
\
\
\
\
\
\
\
\
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 It is highly recommended you use the profiler to assist your work. Execute the following cell to generate a report file:\cb1 \
\
\
\
\pard\pardeftab720\partightenfactor0

\f2\b\fs22\fsmilli11250 \cf2 \cb3 nsys profile --stats=true --force-overwrite=true -o nbody-report ./nbody
\f1\b0\fs30 \cb1 \

\f2\b\fs22\fsmilli11250 \cb3 nsys-ui ./nbody-report.nsys-rep
\f1\b0\fs30 \cb1 \
\
\
\
\
\
\
\
\
\pard\pardeftab720\partightenfactor0
\cf2 \cb3 Here we import a function that will run your\'a0
\f4\fs26\fsmilli13125 \cf4 \strokec4 nbody
\f1\fs30 \cf2 \strokec2 \'a0simulator against a various number of particles, checking for\cb1 \
}